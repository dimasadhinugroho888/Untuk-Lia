<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Untuk Lia üíñ</title>
<style>
  :root{
    --pink:#ff6b9e;
    --soft:#ffd6ea;
    --neon1:#ff66b2;
    --neon2:#a855f7;
    --glass: rgba(255,255,255,0.06);
  }
  /* Reset & base */
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter, Poppins, system-ui,-apple-system,"Segoe UI",Roboto; background:#050014; color:#fff; -webkit-font-smoothing:antialiased}
  #app{position:relative;height:100vh;overflow:hidden;display:flex;align-items:center;justify-content:center;padding:20px}

  /* Canvas full-screen layers */
  canvas {position:absolute;inset:0;display:block;z-index:0}

  /* Card */
  .card{
    position:relative; z-index:4;
    width:min(860px,96%);
    padding:28px;
    border-radius:18px;
    background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
    box-shadow: 0 10px 40px rgba(2,6,23,0.7);
    backdrop-filter: blur(8px);
    text-align:center;
    overflow:visible;
  }

  /* Neon title */
  .title {
    font-size:2.2rem;
    font-weight:700;
    margin:0;
    letter-spacing:0.6px;
    background: linear-gradient(90deg,var(--neon1),var(--neon2));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    text-shadow:
      0 0 8px rgba(255,102,178,0.25),
      0 0 24px rgba(168,85,247,0.12);
    padding-bottom:6px;
    animation: glow 2.8s ease-in-out infinite;
  }
  @keyframes glow{
    0%{filter:drop-shadow(0 0 6px rgba(255,102,178,0.2))}
    50%{filter:drop-shadow(0 0 18px rgba(168,85,247,0.25))}
    100%{filter:drop-shadow(0 0 6px rgba(255,102,178,0.2))}
  }

  /* Subtitle / typewriter */
  .typewriter{
    margin:14px auto 6px;
    font-size:1.05rem;
    max-width:90%;
    white-space:nowrap;
    overflow:hidden;
    border-right:3px solid rgba(255,255,255,0.12);
    animation: typing 6s steps(60,end) 1, blink .8s step-end infinite;
  }
  @keyframes typing { from{width:0} to{width:100%} }
  @keyframes blink { 50%{border-color:transparent} }

  .message{
    margin:12px 0 6px;
    font-size:1.05rem;
    color: #ffdff0;
  }

  /* Buttons */
  .controls{display:flex;gap:16px;justify-content:center;margin-top:18px;flex-wrap:wrap}
  .btn{
    border:0;padding:12px 24px;border-radius:999px;font-weight:700;cursor:pointer;
    box-shadow:0 6px 18px rgba(7,10,26,0.6);
    transition:all .28s cubic-bezier(.2,.9,.2,1);
    transform:translateZ(0);
    user-select:none;
  }
  .btn.yes{
    background: linear-gradient(90deg,var(--pink),#ff8fb0);
    color:#fff;
    box-shadow: 0 8px 30px rgba(255,107,158,0.25), inset 0 -4px 10px rgba(255,255,255,0.03);
    animation: beat 1.6s infinite;
  }
  @keyframes beat{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
  .btn.no{
    background: rgba(255,255,255,0.06);
    color:#ffdce8;
  }

  /* No-button dodge effect on hover (desktop only) */
  .btn.no:hover{transform:translateY(-4px) rotate(-2deg)}

  /* bottom glowing marquee */
  .marquee{
    position:fixed;left:0;right:0;bottom:12px;z-index:5;pointer-events:none;
    font-weight:700;color:transparent;font-size:0.95rem;
    -webkit-text-stroke: 0.4px rgba(255,255,255,0.07);
  }
  .marquee span{
    display:inline-block;padding-left:100%;animation:marquee 14s linear infinite;
    background:linear-gradient(90deg,#fff, #ffd6ea, #ffb3d1, #fff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;
    text-shadow:0 0 8px rgba(255,105,180,0.08);
  }
  @keyframes marquee{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}

  /* popup surat cinta */
  .overlay{position:fixed;inset:0;background:linear-gradient(180deg, rgba(5,0,20,0.6), rgba(0,0,0,0.7));display:flex;align-items:center;justify-content:center;z-index:12;backdrop-filter: blur(6px);opacity:0;pointer-events:none;transition:opacity .28s}
  .overlay.open{opacity:1;pointer-events:auto}
  .letter{
    width:min(820px,92%);max-width:820px;background:linear-gradient(180deg,#ffffff, #fff1f7);color:#111;padding:22px;border-radius:14px;box-shadow:0 18px 60px rgba(10,8,24,0.6);transform:translateY(12px);transition:transform .28s;
  }
  .overlay.open .letter{transform:translateY(0)}
  .letter .head{font-weight:800;color:var(--neon2);font-size:1.25rem}
  .letter .body{margin-top:12px;line-height:1.55;color:#3a2b3f}
  .letter .actions{display:flex;gap:12px;justify-content:flex-end;margin-top:14px}

  /* confetti container */
  #confetti{position:fixed;inset:0;pointer-events:none;z-index:11}

  /* small controls: play/pause music */
  .music-control{position:fixed;right:18px;top:18px;z-index:8;background:var(--glass);padding:8px;border-radius:12px;backdrop-filter:blur(6px);display:flex;gap:8px;align-items:center}
  .music-control button{background:transparent;border:0;color:#fff;cursor:pointer;font-weight:700;padding:6px;border-radius:8px}
  .music-control .label{font-size:0.85rem;color:#ffeef8}

  /* responsive */
  @media (max-width:520px){
    .title{font-size:1.6rem}
    .typewriter{font-size:0.95rem}
    .letter{padding:16px}
    .music-control{right:10px;top:10px}
  }
</style>
</head>
<body>
  <div id="app">
    <!-- canvas layers -->
    <canvas id="starsLayer"></canvas>
    <canvas id="parallaxLayer"></canvas> <!-- for meteors / butterflies -->
    <canvas id="confetti" style="pointer-events:none"></canvas>

    <div class="card" role="main" aria-labelledby="title">
      <h1 id="title" class="title">Untuk <span style="color:#ffd6ea">Sarah Aulia Marpaung</span> üíñ</h1>
      <div class="typewriter" id="typewriter">Sarah‚Ä¶ setiap detik bersamamu membuat dunia terasa begitu hangat.</div>
      <div class="message">Diva? ehm.. maksudnya Sarah, aku ingin jujur: aku suka padamu. Mau kah kamu menjadi bahagiaku?</div>

      <div class="controls" id="controls">
        <button class="btn yes" id="btnYes">üíñ Iya, aku mau</button>
        <button class="btn no" id="btnNo">üôà Tidak</button>
      </div>
    </div>

    <div class="marquee"><span>‚ú® Aku ingin kamu tahu, hatiku hanya untukmu, Sarah ‚Äî maukah kau menjadi bagian hidupku? ‚ú®</span></div>

    <!-- popup surat cinta -->
    <div class="overlay" id="overlay" aria-hidden="true">
      <div class="letter" role="dialog" aria-modal="true" aria-labelledby="letterTitle">
        <div class="head" id="letterTitle">Surat dari seseorang yang menunggumu</div>
        <div class="body" id="letterBody">
          <p>Sarah yang tersayang,</p>
          <p>Aku menulis ini karena setiap kali melihatmu aku merasa tenang. Senyummu mengubah hari-hariku, dan suaramu selalu ingin kuingat. Aku ingin menjadi orang yang membuatmu tertawa, yang menjaga dan mendukungmu kapanpun.</p>
          <p>Jika kamu mengizinkan, aku ingin memulai cerita indah bersamamu ‚Äî sederhana, tulus, dan penuh hormat. Kalau hatimu berkata iya, aku janji akan menjaganya dengan sepenuh hati.</p>
          <p>Selamanya menunggu jawabanmu,<br><strong>‚Äî Seseorang yang sangat menyukaimu</strong></p>
        </div>
        <div class="actions">
          <button class="btn no" id="closeLetter">Baca lagi</button>
          <button class="btn yes" id="sendLetter">Lanjut ke WhatsApp</button>
        </div>
      </div>
    </div>

    <!-- music control -->
    <div class="music-control" id="musicControl" aria-hidden="false">
      <button id="toggleMusic">‚è∏Ô∏è</button>
      <div class="label">musik romantis</div>
    </div>

    <!-- confetti layer (will be drawn by canvas #confetti) -->
  </div>

  <!-- audio (hosted externally). User can replace the src with their own mp3 file or remove) -->
  <audio id="bgm" loop preload="auto">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/09/audio_0eb55f6626.mp3?filename=romantic-piano-112194.mp3" type="audio/mpeg">
  </audio>

<script>
/* ============================
   Setup canvases & responsive
   ============================ */
const starsCanvas = document.getElementById('starsLayer');
const parallaxCanvas = document.getElementById('parallaxLayer');
const confettiCanvas = document.getElementById('confetti');
const canvases = [starsCanvas, parallaxCanvas, confettiCanvas];
function resizeAll(){
  canvases.forEach(c=>{
    c.width = innerWidth;
    c.height = innerHeight;
    c.style.width = innerWidth+'px';
    c.style.height = innerHeight+'px';
  });
}
resizeAll();
addEventListener('resize', resizeAll);

/* ============================
   Interactive Stars (particle)
   ============================ */
const ctxS = starsCanvas.getContext('2d');
let stars = [];
function initStars(num=160){
  stars = [];
  for(let i=0;i<num;i++){
    stars.push({
      x: Math.random()*starsCanvas.width,
      y: Math.random()*starsCanvas.height,
      r: Math.random()*1.6 + 0.4,
      alpha: Math.random()*0.8 + 0.2,
      tw: Math.random()*2+1
    });
  }
}
initStars(160);

let mouse = {x: innerWidth/2, y: innerHeight/2};
addEventListener('mousemove', e=>{ mouse.x=e.clientX; mouse.y=e.clientY; });
addEventListener('touchmove', e=>{ if(e.touches && e.touches[0]){ mouse.x=e.touches[0].clientX; mouse.y=e.touches[0].clientY; } }, {passive:true});

function drawStars(){
  ctxS.clearRect(0,0,starsCanvas.width, starsCanvas.height);
  stars.forEach(s=>{
    // parallax offset based on mouse
    const dx = (mouse.x - starsCanvas.width/2) * (s.r*0.0008);
    const dy = (mouse.y - starsCanvas.height/2) * (s.r*0.0008);
    ctxS.beginPath();
    const x = s.x + dx;
    const y = s.y + dy;
    ctxS.fillStyle = `rgba(255,255,255,${s.alpha})`;
    ctxS.shadowBlur = 6 * s.r;
    ctxS.shadowColor = 'rgba(255,255,255,0.6)';
    ctxS.arc(x,y,s.r,0,Math.PI*2);
    ctxS.fill();
  });
}
setInterval(()=>{ // twinkle change
  stars.forEach(s=> s.alpha = Math.max(0.15, Math.min(1, s.alpha + (Math.random()-0.5)*0.25)));
}, 400);

function animStars(){
  drawStars();
  requestAnimationFrame(animStars);
}
animStars();

/* ============================
   Parallax Layer: meteors & petals
   ============================ */
const ctxP = parallaxCanvas.getContext('2d');
let meteors = [];
let petals = [];

function spawnMeteor(){
  meteors.push({
    x: Math.random()*parallaxCanvas.width - 200,
    y: Math.random()*parallaxCanvas.height*0.25,
    len: 80 + Math.random()*140,
    speed: 6 + Math.random()*8,
    angle: -0.5 - Math.random()*0.2,
    life:0
  });
}
function spawnPetal(){
  petals.push({
    x: Math.random()*parallaxCanvas.width,
    y: -20,
    size: 8 + Math.random()*18,
    speedX: (Math.random()-0.5)*1.4,
    speedY: 0.6 + Math.random()*1.2,
    rot: Math.random()*Math.PI*2,
    rotSpeed: (Math.random()-0.5)*0.08,
    color: `rgba(255,${180+Math.floor(Math.random()*60)},${220+Math.floor(Math.random()*30)},0.95)`
  });
}

setInterval(()=>{ if(Math.random()<0.45) spawnMeteor(); if(Math.random()<0.8) spawnPetal(); }, 700);

function drawParallax(){
  ctxP.clearRect(0,0,parallaxCanvas.width,parallaxCanvas.height);
  // meteors
  meteors.forEach((m,i)=>{
    m.x += Math.cos(m.angle)*m.speed;
    m.y += Math.sin(m.angle)*m.speed;
    m.life += 1;
    const g = ctxP.createLinearGradient(m.x, m.y, m.x+m.len*m.speed, m.y+m.len*m.speed);
    g.addColorStop(0,'rgba(255,255,255,0.9)');
    g.addColorStop(1,'rgba(255,255,255,0)');
    ctxP.fillStyle = g;
    ctxP.beginPath();
    ctxP.ellipse(m.x, m.y, 1.5, 1.5, 0, 0, Math.PI*2);
    ctxP.fill();
    ctxP.fillRect(m.x, m.y, m.len, 1.2);
    if(m.y > parallaxCanvas.height + 200 || m.life>280) meteors.splice(i,1);
  });
  // petals / butterflies
  petals.forEach((p,i)=>{
    p.x += p.speedX;
    p.y += p.speedY;
    p.rot += p.rotSpeed;
    ctxP.save();
    ctxP.translate(p.x, p.y);
    ctxP.rotate(p.rot);
    ctxP.beginPath();
    // simple petal shape
    ctxP.fillStyle = p.color;
    ctxP.ellipse(0,0, p.size*0.6, p.size, 0, 0, Math.PI*2);
    ctxP.fill();
    ctxP.restore();
    if(p.y > parallaxCanvas.height + 80) petals.splice(i,1);
  });
  requestAnimationFrame(drawParallax);
}
drawParallax();

/* ============================
   Falling Hearts (decorative)
   ============================ */
function spawnHeart(){
  const heart = document.createElement('div');
  heart.style.position='fixed';
  heart.style.left = (Math.random()*100)+'vw';
  heart.style.top = '-30px';
  heart.style.zIndex = 3;
  heart.style.pointerEvents='none';
  const size = 12 + Math.random()*28;
  heart.style.fontSize = size+'px';
  heart.style.opacity = 0.95;
  heart.innerText = ['üíñ','üíó','üíï','üíû'][Math.floor(Math.random()*4)];
  document.body.appendChild(heart);
  const duration = 3500 + Math.random()*2200;
  heart.animate([
    { transform: 'translateY(0) rotate(0deg)', opacity:1 },
    { transform: `translateY(${innerHeight+60}px) rotate(${30 - Math.random()*60}deg)`, opacity:0.02 }
  ], {duration, easing:'cubic-bezier(.2,.8,.2,1)'});
  setTimeout(()=> heart.remove(), duration+60);
}
setInterval(spawnHeart, 700);

/* ============================
   Typewriter (already CSS) - small enhancement: restart on hover
   ============================ */
const typeEl = document.getElementById('typewriter');
typeEl.addEventListener('mouseenter', ()=> {
  typeEl.style.animation = 'none';
  void typeEl.offsetWidth;
  typeEl.style.animation = 'typing 6s steps(60,end) 1, blink .8s step-end infinite';
});

/* ============================
   Music player controls
   ============================ */
const bgm = document.getElementById('bgm');
bgm.volume = 0.45;
bgm.play().catch(()=>{ /* Autoplay blocked on some browsers */ });
const toggleMusic = document.getElementById('toggleMusic');
function updateMusicBtn(){ toggleMusic.textContent = bgm.paused? '‚ñ∂Ô∏è' : '‚è∏Ô∏è'; }
toggleMusic.addEventListener('click', ()=>{
  if(bgm.paused) bgm.play(); else bgm.pause();
  updateMusicBtn();
});
updateMusicBtn();

/* ============================
   Confetti system (canvas)
   ============================ */
const cctx = confettiCanvas.getContext('2d');
let confettiPieces = [];
function spawnConfettiBurst(x, y, count=80){
  for(let i=0;i<count;i++){
    confettiPieces.push({
      x: x || Math.random()*confettiCanvas.width,
      y: y || Math.random()*confettiCanvas.height*0.4,
      vx: (Math.random()-0.5)*8,
      vy: (Math.random()* -6) - 2,
      size: 6 + Math.random()*8,
      color: ['#ff6b9e','#ffd6ea','#a87aff','#fff97a','#ffb3d1'][Math.floor(Math.random()*5)],
      rot: Math.random()*Math.PI*2,
      rotSpeed: (Math.random()-0.5)*0.2,
      life: 0
    });
  }
}
function drawConfetti(){
  cctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
  for(let i=confettiPieces.length-1;i>=0;i--){
    const p = confettiPieces[i];
    p.x += p.vx; p.vy += 0.22; p.y += p.vy; p.rot += p.rotSpeed; p.life++;
    cctx.save();
    cctx.translate(p.x,p.y);
    cctx.rotate(p.rot);
    cctx.fillStyle = p.color;
    cctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.6);
    cctx.restore();
    if(p.y > confettiCanvas.height + 50 || p.life > 420) confettiPieces.splice(i,1);
  }
  requestAnimationFrame(drawConfetti);
}
drawConfetti();

/* ============================
   Buttons behaviour & popup letter
   ============================ */
const btnYes = document.getElementById('btnYes');
const btnNo = document.getElementById('btnNo');
const overlay = document.getElementById('overlay');
const closeLetter = document.getElementById('closeLetter');
const sendLetter = document.getElementById('sendLetter');

btnYes.addEventListener('click', ()=>{
  // open letter popup first
  overlay.classList.add('open');
  overlay.setAttribute('aria-hidden','false');
});

// close letter (or "baca lagi")
closeLetter.addEventListener('click', ()=>{
  overlay.classList.remove('open');
  overlay.setAttribute('aria-hidden','true');
});

// send letter -> confetti -> redirect to whatsapp
sendLetter.addEventListener('click', ()=>{
  // confetti burst center
  spawnConfettiBurst(window.innerWidth/2, window.innerHeight/2, 140);
  // also spawn a few meteors & petals for drama
  for(let i=0;i<8;i++) spawnPetal();
  for(let i=0;i<3;i++) spawnMeteor();
  // button feedback
  sendLetter.disabled = true;
  sendLetter.textContent = 'Mengirim...';
  // short delay to show confetti
  setTimeout(()=>{
    const phone = '6285179956922'; // your WA number in international format
    const text = encodeURIComponent('Iya aku mau ‚ù§Ô∏è');
    window.open(`https://wa.me/${phone}?text=${text}`, '_blank');
    sendLetter.textContent = 'Lanjut ke WhatsApp';
    sendLetter.disabled = false;
    overlay.classList.remove('open');
    overlay.setAttribute('aria-hidden','true');
  }, 1600);
});

// No button dodge effect (playsafe on mobile)
let noHoverCount = 0;
btnNo.addEventListener('mouseenter', (e)=>{
  // small dodge movement only on wider screens
  if(innerWidth < 520) return;
  noHoverCount++;
  const dx = (Math.random()*220 - 110);
  const dy = (Math.random()*120 - 60);
  btnNo.style.transform = `translate(${dx}px, ${dy}px)`;
  // perhaps spawn a playful petal
  spawnPetal();
});
btnNo.addEventListener('click', ()=>{
  // gentle message
  alert('Yahh... semoga lain kali ya üòä');
});

/* Accessibility: keyboard */
document.addEventListener('keydown', (e)=>{
  if(e.key.toLowerCase()==='y') btnYes.click();
  if(e.key.toLowerCase()==='n') btnNo.click();
});

/* ============================
   Utility: expose spawn for script use
   ============================ */
window.spawnMeteor = spawnMeteor;
window.spawnPetal = spawnPetal;

/* ============================
   Initial small bursts for atmosphere
   ============================ */
setTimeout(()=>{ for(let i=0;i<3;i++) spawnMeteor(); }, 600);
setTimeout(()=>{ for(let i=0;i<8;i++) spawnPetal(); }, 800);

/* ============================
   Ensure canvases resize with DPR
   ============================ */
function fixDPR(){
  const dpr = Math.max(1, window.devicePixelRatio || 1);
  canvases.forEach(c=>{
    const w = innerWidth; const h = innerHeight;
    c.width = Math.floor(w * dpr);
    c.height = Math.floor(h * dpr);
    c.style.width = w + 'px';
    c.style.height = h + 'px';
    const ctx = c.getContext('2d');
    ctx.setTransform(dpr,0,0,dpr,0,0);
  });
}
fixDPR();
addEventListener('resize', fixDPR);
</script>
</body>
</html>
